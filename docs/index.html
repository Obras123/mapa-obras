<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Mapa Funcionando</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
    <style>
        #map { height: 600px; }
    </style>
</head>
<body>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        const map = L.map('map').setView([-21.1225, -44.1975], 14);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        // Função 100% testada
        async function carregarCamada(caminho, nome, cor) {
            try {
                const response = await fetch(caminho);
                const data = await response.json();
                
                L.geoJSON(data, {
                    style: { color: cor, weight: 4 },
                    pointToLayer: (feature, latlng) => L.circleMarker(latlng, {
                        radius: 8,
                        fillColor: cor,
                        fillOpacity: 1
                    })
                }).addTo(map);
            } catch (error) {
                console.error(`Erro em ${nome}:`, error);
            }
        }

        // Carregar camadas
        carregarCamada('docs/arquivos_geojson/caminho_fiscalizado.geojson', 'Caminho', '#FF0000');
        carregarCamada('docs/arquivos_geojson/obras_com_alvaras.geojson', 'Alvarás', '#00FF00');
        carregarCamada('docs/arquivos_geojson/obras_irregulares.geojson', 'Irregulares', '#FFA500');
        carregarCamada('docs/arquivos_geojson/notificados.geojson', 'Notificados', '#800080');
    </script>
</body>
</html>
