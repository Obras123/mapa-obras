<!DOCTYPE html>
<html lang="pt-br">
<head>
    <!-- ... (mantenha o mesmo cabeçalho e CSS) ... -->
</head>
<body>
    <h1 style="text-align: center; color: #2c3e50;">Fiscalização de Obras - Tiradentes/MG</h1>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        const map = L.map('map').setView([-21.1225, -44.1975], 14);

        // Camada Base
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        // Função Corrigida
        function carregarCamada(caminho, nome, cor, tipo) {
            fetch(caminho)
                .then(response => response.json())
                .then(data => {
                    const camada = L.geoJSON(data, {
                        pointToLayer: (feature, latlng) => {
                            return L.circleMarker(latlng, {
                                radius: 8,
                                fillColor: cor,
                                color: "#333",
                                weight: 1,
                                fillOpacity: 1
                            });
                        },
                        style: {
                            color: cor,
                            weight: 6,
                            opacity: 1
                        },
                        onEachFeature: (feature, layer) => {
                            layer.bindPopup(`<b>${nome}</b>`);
                        }
                    }).addTo(map);
                })
                .catch(error => console.error("Erro:", error));
        }

        // Carregar Camadas
        carregarCamada('arquivos_geojson/caminho_fiscalizado.geojson', 'Caminho Fiscalizado', '#e74c3c', 'linha');
        carregarCamada('arquivos_geojson/obras_com_alvaras.geojson', 'Obras com Alvarás', '#2ecc71', 'ponto');
        carregarCamada('arquivos_geojson/obras_irregulares.geojson', 'Obras Irregulares', '#f1c40f', 'ponto');
        carregarCamada('arquivos_geojson/notificados.geojson', 'Notificados', '#9b59b6', 'ponto');

        // ... (mantenha a legenda) ...
    </script>
</body>
</html>
